/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[3,84],{634:function(t,e,r){"use strict";r.r(e);r(29),r(30),r(38),r(9),r(58),r(28),r(59);var o=r(25);r(22);function n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?n(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var c=r(41),h=(r(139),r(36),r(35),r(37),r(767),r(91),r(179)),d=r(16),m=r(751),f=r(693),v=r(613),y={components:{CloLoadingAnimation:h.default,CloMediaControls:v.default,CloIcon:d.default,CloAudioAnnotations:m.default,CloModelPredictions:f.default},data:function(){return{annotations:[],showSpectrogramPlayer:!0,readyToPlaySpect:!1,readyToPlayAudio:!1,playing:!1,needToAutoplay:!1,dpr:window.devicePixelRatio,position:0,posterOffset:!1,time:0,duration:0,lastUpdate:0,playerWidth:0,timelineImageWidth:0,progressPercent:0,pixelsPerSecond:0,spectWidth:0,zoomLevel:1,volumeSlider:1,volumeToRestore:1,showVolume:!1,showLoading:!0,stillProcessing:!1,mediaMissing:!1,specimenBaseUrl:"https://macaulaylibrary.org/asset/",spects:[],xAxisCanv:null,yAxisCanv:null,trackCanv:null,timelineCanv:null,cursorCanv:null,yAxisWidth:this.minimal?0:24,width:0,basePxPerSec:250,locked:!1,fillColor:"#6F6E67",textColor:"#817F79"}},props:{assetId:{},citationUrl:{default:!1},citationName:{default:null,type:String},timeline:{default:!1,type:Boolean},zoom:{default:!1,type:Boolean},assetRestricted:{default:!1,type:Boolean},user:{default:null,type:String},location:{default:null,type:String},date:{default:null,type:String},title:{default:null,type:String},autoplay:{default:!1,type:Boolean},size:{default:"",type:String},mediaDownloadUrl:{default:"https://cdn.download.ams.birds.cornell.edu/api/v1/asset/",type:String},annotation:{type:Boolean,default:!1},enableAnnotating:{type:Boolean,default:!1},initialAnnotations:{type:Array,default:function(){return[]}},predictions:{type:Array,default:function(){return[]}},activeAnnotation:{type:Object,default:function(){return{}}},alternateHandles:{type:Boolean,default:!1},edgeHandles:{type:Boolean,default:!1},skipToTime:{type:Number,default:0},skipBackIncrement:{type:Number,default:0},skipAheadIncrement:{type:Number,default:0},togglePlayIncrement:{type:Number,default:0},version:{type:String,default:"1.0"},startAtTime:{type:Number,default:0},displayPxPerSec:{type:Number,default:200},maxPxPerSec:{type:Number,default:400,validator:function(t){return t>250}},minPxPerSec:{type:Number,default:50,validator:function(t){return t<250}},minimal:{type:Boolean,default:!1}},watch:{skipToTime:function(t){this.time=t,this.$refs.audio.currentTime=t,this.setTranslation(),this.redrawCanvas()},skipBackIncrement:function(){var t=this.$refs.audio.currentTime,e=Math.max(0,t-2);this.animateSkip(t,e)},skipAheadIncrement:function(){var t=this.$refs.audio.currentTime,e=Math.min(t+2,this.duration);this.animateSkip(t,e)},togglePlayIncrement:function(){this.togglePlay()},autoplay:function(t){this.needToAutoplay=t}},computed:{poster:function(){return"1.0"===this.version?this.mediaDownloadUrl+this.assetId+"/poster":"2.0"===this.version?"".concat(this.mediaDownloadUrl).concat(this.assetId,"/default/preview"):void 0},media:function(){return"1.0"===this.version?this.mediaDownloadUrl+this.assetId+"/audio":"2.0"===this.version?this.mediaDownloadUrl+this.assetId+"/mp3":void 0},timelineImage:function(){return"1.0"===this.version?"url(".concat(this.mediaDownloadUrl).concat(this.assetId,"/spectrogram_small)"):"url(".concat(this.mediaDownloadUrl).concat(this.assetId,"/default/timeline)")},specimenUrl:function(){return!this.citationUrl&&!this.assetRestricted&&this.specimenBaseUrl+this.assetId},frameHeight:function(){switch(this.size){case"compact":case"sm":return 168;case"xs":return 110;default:return 220}},predictionsHeight:function(){var t=[];return this.predictions.forEach((function(e){t.includes(e.categoryId)||t.push(e.categoryId)})),14*t.length},yAxisFont:function(){switch(this.size){case"xs":return"9px sans-serif";case"sm":return"11px sans-serif";default:return"12px sans-serif"}},pxPerSec:function(){return this.zoom?this.basePxPerSec*this.zoomLevel:this.displayPxPerSec},baseZoomLevel:function(){var t=Math.min(this.maxPxPerSec,1.75*this.basePxPerSec),e=Math.max(this.minPxPerSec,.15*this.basePxPerSec),r=(t-e)/99,o=e-r;return(this.displayPxPerSec-o)/r},spectrogramWidthFactor:function(){return this.zoom?this.zoomLevel:this.displayPxPerSec/this.basePxPerSec},maxFreq:function(){return"1.0"===this.version?10:"2.0"===this.version?12:void 0},secondsPerSpect:function(){return"1.0"===this.version?262:"2.0"===this.version?60:void 0},timelineHeight:function(){return this.timeline?"1.0"===this.version||"2.0"===this.version?40:void 0:0},xAxisHeight:function(){return this.minimal?0:"1.0"===this.version?16:"2.0"===this.version?20:void 0},messages:function(){return{mute:"mute",volume:"volume",seek:"seek",play:"play",zoom:"zoom",errorNoSpectrogram:"Sorry, there was an error loading this file. Please check later.",errorNoAudio:"We are still processing this file. Please check later."}},classes:function(){var t=[],e="SpectrogramPlayer--";return this.size.length&&t.push(e+this.size),this.annotation&&t.push(e+"annotation"),t.join(" ")},spectNeededToPlay:function(){return Math.floor(this.time/this.secondsPerSpect)}},beforeMount:function(){"compact"===this.size&&this.size,this.zoom&&this.displayPxPerSec!==this.basePxPerSec&&(this.zoomLevel=this.zoomValToZoomLevel(this.baseZoomLevel)),this.needToAutoplay=!!this.autoplay},mounted:function(){window.addEventListener("resize",this.handleResize),document.addEventListener("lichen:spect-togglePlay",this.handleTogglePlayEvent),document.addEventListener("lichen:spect-pause",this.pause),document.addEventListener("lichen:spect-destroy",this.destroyPlayer)},beforeDestroy:function(){this.destroyPlayer()},methods:{removeListeners:function(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("lichen:spect-togglePlay",this.handleTogglePlayEvent),document.removeEventListener("lichen:spect-pause",this.pause),document.removeEventListener("lichen:spect-destroy",this.destroyPlayer)},destroyPlayer:function(t){(null==t?void 0:t.detail.assetId)===parseInt(this.assetId)&&this.playing&&this.pause(),this.removeListeners()},handleTogglePlayEvent:function(t){t.detail.assetId===parseInt(this.assetId)&&this.togglePlay()},setVolume:function(t){this.$refs.audio.volume=t,this.volumeToRestore=t},togglePlay:function(){this.showSpectrogramPlayer||(this.showSpectrogramPlayer=!0,this.drawYAxis()),this.$refs.audio&&(this.playing?(this.$refs.audio.pause(),this.$emit("playing",!1)):(this.$refs.audio.currentTime=this.time,this.$refs.audio.play(),this.$emit("playing",!0)))},isPlaying:function(){this.playing=!0,this.animateCanvas(),this.$emit("playing",!0)},isPaused:function(){this.playing=!1,this.$emit("playing",!1)},pause:function(){this.$refs.audio&&this.$refs.audio.pause(),this.playing=!1},animateCanvas:function(){var t=this;this.lastUpdate=performance.now(),requestAnimationFrame((function e(){var r=performance.now()-t.lastUpdate;t.lastUpdate=performance.now(),t.time+=r/1e3,t.setTranslation(),t.redrawCanvas(),t.playing&&requestAnimationFrame(e)}))},setTime:function(t){this.time=parseFloat(t),this.$refs.audio.currentTime=parseFloat(t),this.setTranslation(),this.redrawCanvas()},setPosition:function(t){this.time=parseFloat(t),this.setTranslation(),this.redrawCanvas()},setTranslation:function(){this.position=this.width/2+this.time*this.pxPerSec},setZoom:function(t){var e,r=Math.min(this.maxPxPerSec,1.75*this.basePxPerSec),o=Math.max(this.minPxPerSec,.15*this.basePxPerSec),n=(r-o)/99;e=(n*t+(o-n))/this.basePxPerSec,this.zoomLevel=e,this.setTranslation(),this.redrawCanvas()},zoomValToZoomLevel:function(t){var e=Math.min(this.maxPxPerSec,1.75*this.basePxPerSec),r=Math.max(this.minPxPerSec,.15*this.basePxPerSec),o=(e-r)/99;return(o*t+(r-o))/this.basePxPerSec},redrawCanvas:function(){this.progressPercent=100*this.time/this.duration,this.drawXAxis(),this.drawTimeline(),this.drawTrack(),this.drawCursor()},formatTime:function(time){return time<3600?Math.floor(time/60)+":"+("0"+Math.floor(time%60)).slice(-2):Math.floor(time/3600)+":"+("0"+Math.floor(time%3600/60)).slice(-2)+":"+("0"+Math.floor(time%60)).slice(-2)},timeUpdated:function(t){this.$refs.audio&&(this.time=this.$refs.audio.currentTime,this.$emit("time-updated",this.time))},prepareSpects:function(){if("1.0"===this.version)this.spects.push({url:this.mediaDownloadUrl+this.assetId+"/spectrogram_small",image:null,timer:null});else if("2.0"===this.version)for(var t=Math.ceil(this.duration/this.secondsPerSpect),i=0;i<t;i++){var e=String(i+1).padStart(4,"0");this.spects.push({url:"".concat(this.mediaDownloadUrl).concat(this.assetId,"/default/partial/").concat(e),image:null,timer:null})}},loadSpect:function(t){var e=Math.max(0,Math.floor((this.position-this.width)/(this.pxPerSec*this.secondsPerSpect))),r=Math.ceil((this.position+this.width/2)/(this.pxPerSec*this.secondsPerSpect));if(!(t<e||t>r)){this.spects[t].image="loading";var image=new Image;image.spectIndex=t,image.addEventListener("load",this.drawSpect),image.addEventListener("error",this.spectError),image.src=this.spects[t].url}},drawSpect:function(t){var image=t.target;this.spects[image.spectIndex].image=image;var e=this.time<this.width/(2*this.pxPerSec)&&!this.annotation?image.spectIndex*this.pxPerSec*this.secondsPerSpect:image.spectIndex*this.pxPerSec*this.secondsPerSpect+this.width-this.position;this.trackCanv.drawImage(image,e,0,this.spects[image.spectIndex].image.width*this.spectrogramWidthFactor,this.frameHeight),this.spectNeededToPlay===image.spectIndex&&(this.showLoading=!1,this.readyToPlaySpect=!0,this.needToAutoplay&&this.startPlayIfReady())},spectError:function(t){console.error("Error loading spectrogram image",t.target.spectIndex)},drawXAxis:function(){this.xAxisCanv.setTransform(1,0,0,1,0,0),this.xAxisCanv.scale(this.dpr,this.dpr),this.xAxisCanv.clearRect(0,0,this.width,this.xAxisHeight);var t=Math.floor((this.position-this.width)/this.pxPerSec);t<0&&(t=0);var e=Math.ceil((this.position+this.width)/this.pxPerSec);e>this.duration&&(e=this.duration);for(var time=t;time<=e;time+=.25){var r=this.time<this.width/(2*this.pxPerSec)&&!this.annotation?time*this.pxPerSec:time*this.pxPerSec+this.width-this.position;this.xAxisCanv.beginPath(),this.xAxisCanv.moveTo(r,0),time%5==0?this.xAxisCanv.lineTo(r,16):time%1==0?this.zoomLevel>.2?this.xAxisCanv.lineTo(r,16):this.xAxisCanv.lineTo(r,4):time%1==.5&&this.zoomLevel>.5?this.xAxisCanv.lineTo(r,8):time%.25==0&&this.zoomLevel>.75&&this.xAxisCanv.lineTo(r,4),this.xAxisCanv.stroke(),this.xAxisCanv.closePath(),(time%1==0&&this.zoomLevel>.2||time%5==0)&&this.xAxisCanv.fillText(this.formatTime(time),r+4,14)}},drawYAxis:function(){this.yAxisCanv.setTransform(1,0,0,1,0,0),this.yAxisCanv.scale(this.dpr,this.dpr),this.yAxisCanv.clearRect(0,0,this.yAxisWidth,this.frameHeight+this.xAxisHeight),this.yAxisCanv.font=this.yAxisFont,this.yAxisCanv.fillStyle=this.fillColor,this.yAxisCanv.lineWidth=1,this.yAxisCanv.strokeStyle=this.textColor;for(var t=this.frameHeight,e=this.maxFreq;e>=0;){var r=this.xAxisHeight+t-e/this.maxFreq*t;this.yAxisCanv.beginPath(),this.yAxisCanv.moveTo(0,r),this.yAxisCanv.lineTo(this.yAxisWidth/2,r),this.yAxisCanv.stroke(),this.yAxisCanv.closePath(),0===e?this.yAxisCanv.fillText("kHz",2,r-4+("xs"==this.size)):this.yAxisCanv.fillText(e,2,r+14-3*("xs"==this.size)),e-=2}},drawTimeline:function(){this.timelineCanv.setTransform(1,0,0,1,0,0),this.timelineCanv.scale(this.dpr,this.dpr),this.timelineCanv.clearRect(0,0,this.width+this.yAxisWidth,this.timelineHeight);var t=this.time/this.duration*(this.width+this.yAxisWidth);this.timelineCanv.beginPath(),this.timelineCanv.moveTo(t,0),this.timelineCanv.lineTo(t,this.timelineHeight),this.timelineCanv.stroke(),this.timelineCanv.closePath();var e=this.width/(this.pxPerSec*this.duration)*(this.width+this.yAxisWidth);this.timelineCanv.fillStyle="rgba(0, 0, 0, 0.1)",this.timelineCanv.fillRect(0,0,t-e/2,this.timelineHeight),this.timelineCanv.fillRect(t+e/2,0,this.width+this.yAxisWidth-(t+e/2),this.timelineHeight)},drawTrack:function(){var t=this;this.trackCanv.setTransform(1,0,0,1,0,0),this.trackCanv.scale(this.dpr,this.dpr),this.trackCanv.clearRect(0,0,this.width,this.frameHeight);for(var e=Math.max(0,Math.floor((this.position-this.width)/(this.pxPerSec*this.secondsPerSpect))),r=Math.ceil((this.position+this.width/2)/(this.pxPerSec*this.secondsPerSpect)),o=function(i){if(!t.spects[i])return{v:void 0};if(null===t.spects[i].image&&(t.spects[i].timer=setTimeout((function(){t.loadSpect(i)}),50)),"loading"!==t.spects[i].image&&null!==t.spects[i].image){var e=t.time<t.width/(2*t.pxPerSec)&&!t.annotation?i*t.pxPerSec*t.secondsPerSpect:i*t.pxPerSec*t.secondsPerSpect+t.width-t.position;t.trackCanv.drawImage(t.spects[i].image,e,0,t.spects[i].image.width*t.spectrogramWidthFactor,t.frameHeight)}},i=e;i<r;i++){var n=o(i);if("object"===Object(c.a)(n))return n.v}},drawCursor:function(){this.cursorCanv.setTransform(1,0,0,1,0,0),this.cursorCanv.scale(this.dpr,this.dpr),this.cursorCanv.clearRect(0,0,this.width,this.frameHeight+this.xAxisHeight),this.cursorCanv.lineWidth=1;var t=this.time<this.width/(2*this.pxPerSec)&&!this.annotation?this.time*this.pxPerSec:this.width/2;this.cursorCanv.beginPath(),this.cursorCanv.moveTo(t,0),this.cursorCanv.lineTo(t,this.frameHeight+this.xAxisHeight),this.cursorCanv.stroke(),this.cursorCanv.closePath()},drawCanvas:function(){var t=this,rect=this.$el.getBoundingClientRect();this.width=rect.width-this.yAxisWidth-2,this.$nextTick((function(){t.xAxisCanv=t.$refs.xAxisCanv.getContext("2d"),t.trackCanv=t.$refs.trackCanv.getContext("2d"),t.timelineCanv=t.$refs.timelineCanv.getContext("2d"),t.cursorCanv=t.$refs.cursorCanv.getContext("2d"),t.yAxisCanv=t.$refs.yAxisCanv.getContext("2d"),t.trackCanv.imageSmoothingEnabled=!1,t.position=t.width/2+t.time*t.pxPerSec,t.xAxisCanv.font="12px sans-serif",t.xAxisCanv.fillStyle=t.fillColor,t.xAxisCanv.lineWidth=1,t.xAxisCanv.strokeStyle=t.textColor,t.drawTrack(),t.drawXAxis(),t.drawYAxis(),t.drawTimeline(),t.drawCursor()}))},loadedMetadata:function(t){var e=t.target.duration;this.duration=e,this.time=this.startAtTime,this.$refs.audio.currentTime=this.startAtTime,this.$emit("spectrogram-duration",e),this.annotation&&(this.showSpectrogramPlayer=!0),this.prepareSpects(),this.drawCanvas(),this.updateTimelineWidth(),this.mediaMissing=!1,this.stillProcessing=!1,this.autoplay||(this.showLoading=!1)},startPlayIfReady:function(){var t=this;if(this.readyToPlaySpect&&this.readyToPlayAudio&&this.$refs.audio){var e=this.$refs.audio.play();void 0!==e&&e.catch((function(t){})).then((function(){t.needToAutoplay=!1,t.$emit("playing",!0)})),this.showLoading=!1}},canPlayThrough:function(){this.readyToPlayAudio=!0,this.autoplay&&this.startPlayIfReady()},handleResize:function(){var t=this;this.dpr=window.devicePixelRatio;var rect=this.$el.getBoundingClientRect();this.width=rect.width-this.yAxisWidth-2,this.updateTimelineWidth(),this.xAxisCanv&&this.$nextTick((function(){t.setTranslation(),t.redrawCanvas()}))},updateTimelineWidth:function(){if(this.timelineImageWidth=this.width+this.yAxisWidth,"1.0"===this.version){var t=65500/this.basePxPerSec;this.duration>t&&(this.timelineImageWidth=t/this.duration*(this.width+this.yAxisWidth))}},toggleVolume:function(){0==this.volumeSlider?0==this.volumeToRestore?this.volumeSlider=1:this.volumeSlider=this.volumeToRestore:this.volumeSlider=0,this.setVolume()},clickOnSpectrogramPlayer:function(t){this.annotation||this.togglePlay()},saveAnnotation:function(t){this.$emit("annotation-changed",t)},annotationSelected:function(t,e){this.$emit("annotation-selected",t,e)},animateSkip:function(t,e){var r=this;if(!this.locked){this.locked=!0;var o=this.playing;o&&this.pause();var n=0;!function o(){var p=(n+=1/60)/.2,l=-.5*(Math.cos(Math.PI*p)-1);p<1?(requestAnimationFrame(o),r.$refs.audio.currentTime=t+(e-t)*l):(r.$refs.audio.currentTime=e,r.time=e),r.setTranslation(),r.redrawCanvas()}(),o&&this.togglePlay(),this.locked=!1}}}},x=(r(773),r(2)),component=Object(x.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"SpectrogramPlayer",class:t.classes,attrs:{dir:"ltr",tabindex:"0"}},[e("div",{staticClass:"SpectrogramPlayer-frame",style:{gridTemplateColumns:"".concat(t.yAxisWidth,"px 1fr"),gridTemplateRows:"".concat(t.xAxisHeight,"px ").concat(t.frameHeight,"px auto ").concat(t.timelineHeight,"px")},attrs:{"aria-hidden":"true"},on:{"!click":function(e){e.preventDefault(),!t.annotation&&t.togglePlay()}}},[t.autoplay||t.showSpectrogramPlayer||t.mediaMissing?t._e():e("img",{staticClass:"SpectrogramPlayer-poster",class:{offset:t.posterOffset},style:{height:t.frameHeight+"px",top:t.xAxisHeight+"px"},attrs:{role:"presentation",alt:"ML"+t.assetId+" visualization",src:t.poster},on:{click:t.togglePlay,error:function(e){t.mediaMissing=!0}}}),t._v(" "),!t.showLoading||t.mediaMissing||t.stillProcessing||t.minimal?t._e():e("div",{staticClass:"LoadingAnimation"},[e("CloIcon",{attrs:{symbol:"spinner"}})],1),t._v(" "),t.stillProcessing&&!t.mediaMissing?e("div",{staticClass:"SpectrogramPlayer-errorMessage"},[e("CloIcon",{attrs:{symbol:"timer"}}),t._v("\n\t\t\t\t"+t._s(t.messages.errorNoSpectrogram)+"\n\t\t\t")],1):t._e(),t._v(" "),t.mediaMissing?e("div",{staticClass:"SpectrogramPlayer-errorMessage"},[e("CloIcon",{attrs:{symbol:"timer"}}),t._v("\n\t\t\t\t"+t._s(t.messages.errorNoAudio)+"\n\t\t\t")],1):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showSpectrogramPlayer&&!t.minimal,expression:"showSpectrogramPlayer && !minimal"}],ref:"xAxisCanv",staticClass:"xAxisCanv",style:{width:"".concat(t.width,"px"),height:"".concat(t.xAxisHeight,"px")},attrs:{"aria-hidden":"true",width:t.width*t.dpr,height:t.xAxisHeight*t.dpr},on:{click:t.togglePlay}}),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showSpectrogramPlayer,expression:"showSpectrogramPlayer"}],ref:"trackCanv",staticClass:"trackCanv",style:l(l({},t.annotation?{cursor:"pointer"}:{}),{},{width:"".concat(t.width,"px"),height:"".concat(t.frameHeight,"px")}),attrs:{"aria-hidden":"true",width:t.width*t.dpr,height:t.frameHeight*t.dpr},on:{click:t.togglePlay}}),t._v(" "),t.annotation&&t.duration?e("CloAudioAnnotations",{staticClass:"trackCanv",attrs:{width:t.width,height:t.frameHeight,enableAnnotating:t.enableAnnotating,initialAnnotations:t.initialAnnotations,activeAnnotation:t.activeAnnotation,alternateHandles:t.alternateHandles,edgeHandles:t.edgeHandles,showAnnotations:!0,offset:t.time*t.pxPerSec/t.width,totalOffset:t.duration*t.pxPerSec/t.width,zoom:t.zoomLevel,annotationVersion:t.version,maxFrequency:t.maxFreq,basePxPerSec:t.basePxPerSec,clonePosition:"x"},on:{"annotation-changed":t.saveAnnotation,"annotation-selected":t.annotationSelected}}):t._e(),t._v(" "),t.predictions.length&&t.duration?e("CloModelPredictions",{ref:"predictions",staticClass:"SpectrogramPlayer-predictions",attrs:{predictions:t.predictions,offset:t.time*t.pxPerSec/t.width,width:t.width,zoom:t.zoomLevel,basePxPerSec:t.basePxPerSec},on:{"prediction-click":function(e){return t.$emit("prediction-click",e)}}}):t._e(),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showSpectrogramPlayer,expression:"showSpectrogramPlayer"}],ref:"timelineCanv",staticClass:"timelineCanv",style:{backgroundSize:t.timelineImageWidth+"px "+t.timelineHeight+"px",backgroundImage:t.timelineImage,width:"".concat(t.width+t.yAxisWidth,"px"),height:"".concat(t.timelineHeight,"px")},attrs:{"aria-hidden":"true",width:(t.width+t.yAxisWidth)*t.dpr,height:t.timelineHeight*t.dpr}}),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showSpectrogramPlayer,expression:"showSpectrogramPlayer"}],ref:"cursorCanv",staticClass:"cursorCanv",style:{width:"".concat(t.width,"px"),height:"".concat(t.frameHeight+t.xAxisHeight+t.predictionsHeight,"px")},attrs:{"aria-hidden":"true",width:t.width*t.dpr,height:(t.frameHeight+t.xAxisHeight+t.predictionsHeight)*t.dpr}}),t._v(" "),e("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showSpectrogramPlayer&&!t.minimal,expression:"showSpectrogramPlayer && !minimal"}],ref:"yAxisCanv",staticClass:"yAxisCanv",style:{height:"".concat(t.frameHeight+t.xAxisHeight,"px"),width:"".concat(t.yAxisWidth,"px")},attrs:{"aria-hidden":"true",width:t.yAxisWidth*t.dpr,height:(t.frameHeight+t.xAxisHeight)*t.dpr}}),t._v(" "),e("audio",{ref:"audio",attrs:{"aria-label":"ML"+t.assetId,src:t.media,preload:"metadata"},on:{timeupdate:t.timeUpdated,loadedmetadata:t.loadedMetadata,playing:t.isPlaying,pause:t.isPaused,"~canplaythrough":function(e){return t.canPlayThrough.apply(null,arguments)},error:function(e){t.mediaMissing=!0}}})],1),t._v(" "),t.minimal?t._e():e("CloMediaControls",{attrs:{playing:t.playing,messages:{seek:"seek",play:"play",fullscreen:"fullscreen",volume:"volume",mute:"mute"},showVolume:!0,citationUrl:t.citationUrl,citationName:t.citationName,title:t.title,user:t.user,date:t.date,location:t.location,assetId:t.assetId,progressPercent:t.progressPercent,duration:t.duration,currentTime:t.time,timeline:t.timeline,zoom:t.zoom&&t.showSpectrogramPlayer,baseZoomLevel:t.baseZoomLevel},on:{togglePlay:t.togglePlay,setPosition:t.setPosition,setVolume:t.setVolume,setTime:t.setTime,toggleVolume:t.toggleVolume,"set-zoom":t.setZoom}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{CloIcon:r(16).default,CloAudioAnnotations:r(751).default,CloModelPredictions:r(693).default,CloMediaControls:r(613).default})},667:function(t,e,r){var content=r(727);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("765c030c",content,!0,{sourceMap:!1})},693:function(t,e,r){"use strict";r.r(e);r(139),r(9),r(28),r(112),r(19),r(43);var o={props:{predictions:{type:Array,default:function(){return[]}},width:{type:Number,required:!0},offset:{type:Number,default:0},zoom:{type:Number,default:1},basePxPerSec:{type:Number,default:250}},computed:{rows:function(){var t=[];return this.predictions.forEach((function(e){t.find((function(t){return t.categoryId===e.categoryId}))||t.push({categoryId:e.categoryId,color:e.color})})),t}},methods:{textColor:function(t){return this.contrast(this.hexToRgb(t),[255,255,255])>=4.5?"#fff":"#000"},hexToRgb:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null},luminance:function(t,g,b){var a=[t,g,b].map((function(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}));return.2126*a[0]+.7152*a[1]+.0722*a[2]},contrast:function(t,e){var r=this.luminance(t[0],t[1],t[2]),o=this.luminance(e[0],e[1],e[2]);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)},convertSecondsToProportion:function(t,e,r){return(t*(this.basePxPerSec*r)-e*this.width)/this.width+.5},computeDisplay:function(t,e){switch(e){case"left":return 100*this.convertSecondsToProportion(t.startTime,this.offset,this.zoom)+"%";case"right":return 100*(1-this.convertSecondsToProportion(t.endTime,this.offset,this.zoom))+"%"}}}},n=(r(726),r(2)),component=Object(n.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"ModelPredictions"},t._l(t.rows,(function(r,o){return e("div",{key:o,staticClass:"ModelPredictions-row"},[t._l(t.predictions,(function(o,i){return[o.categoryId===r.categoryId?e("span",{directives:[{name:"clo-tooltip",rawName:"v-clo-tooltip"}],key:i,staticClass:"ModelPredictions-bar",style:{left:t.computeDisplay(o,"left"),right:t.computeDisplay(o,"right"),backgroundColor:r.color,color:t.textColor(r.color)},attrs:{title:o.label,role:"button"},on:{click:function(e){return t.$emit("prediction-click",{prediction:o,$event:e})}}},[t._v("\n\t\t\t\t"+t._s(i+1)+": "+t._s(o.label)+"\n\t\t\t")]):t._e()]}))],2)})),0)}),[],!1,null,"36280157",null);e.default=component.exports},700:function(t,e,r){var content=r(774);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(15).default)("47645830",content,!0,{sourceMap:!1})},726:function(t,e,r){"use strict";r(667)},727:function(t,e,r){var o=r(14)(!1);o.push([t.i,"@keyframes pulse-36280157{0%,100%{opacity:1}50%{opacity:.5}}.ModelPredictions[data-v-36280157]{background-color:#faf9f7;font-size:.75rem;line-height:1.333;color:#fff}.ModelPredictions-row[data-v-36280157]{position:relative;height:14px}.ModelPredictions-bar[data-v-36280157]{position:absolute;height:14px;white-space:nowrap;padding:0 .25rem}",""]),t.exports=o},767:function(t,e,r){"use strict";var o=r(3),n=r(768).start;o({target:"String",proto:!0,forced:r(769)},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},768:function(t,e,r){var o=r(6),n=r(76),l=r(20),c=r(281),h=r(44),d=o(c),m=o("".slice),f=Math.ceil,v=function(t){return function(e,r,o){var c,v,y=l(h(e)),x=n(r),P=y.length,w=void 0===o?" ":l(o);return x<=P||""==w?y:((v=d(w,f((c=x-P)/w.length))).length>c&&(v=m(v,0,c)),t?y+v:v+y)}};t.exports={start:v(!1),end:v(!0)}},769:function(t,e,r){var o=r(67);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o)},773:function(t,e,r){"use strict";r(700)},774:function(t,e,r){var o=r(14)(!1);o.push([t.i,'@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}.SpectrogramPlayer{text-align:left;overflow:hidden;background-color:#fff;user-select:none}.SpectrogramPlayer canvas{image-rendering:pixelated}.SpectrogramPlayer .SpectrogramPlayer-frame{position:relative;border:1px solid #e5e3dc;border-bottom:0;display:grid;grid-template-areas:"yAxis xAxis" "yAxis track" "yAxis predictions" "timeline timeline"}.SpectrogramPlayer .yAxisCanv{display:block;grid-area:yAxis;background-color:#fff;z-index:1}.SpectrogramPlayer .xAxisCanv{display:block;grid-area:xAxis}.SpectrogramPlayer .trackCanv{display:block;grid-area:track}.SpectrogramPlayer .cursorCanv{display:block;grid-area:xAxis/predictions;pointer-events:none}.SpectrogramPlayer .timelineCanv{display:block;grid-area:timeline/timeline;background-repeat:no-repeat}.SpectrogramPlayer .SpectrogramPlayer-predictions{display:block;grid-area:predictions}.SpectrogramPlayer .SpectrogramPlayer-poster{position:absolute;cursor:pointer;object-fit:fill;object-position:left}.SpectrogramPlayer .SpectrogramPlayer-errorMessage{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);padding:1rem 1rem 1rem 1rem;color:#302f2c;background-color:rgba(255,255,255,.8)}.SpectrogramPlayer .LoadingAnimation{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);background-color:rgba(0,0,0,0);pointer-events:none}.SpectrogramPlayer--primary .MediaControls-controls{background-color:#304e64}.SpectrogramPlayer--primary .MediaControls-branding{display:none}.SpectrogramPlayer--primary .MediaControls-volume .MediaControls-volumeSliderOverlay{background-color:#304e64}.SpectrogramPlayer--primary .MediaControls-meta a{color:#b4cfe1}.SpectrogramPlayer--annotation .SpectrogramPlayer-xAxis{border-bottom:1px solid #f4f3f1}.SpectrogramPlayer--annotation .SpectrogramPlayer-xAxis .SpectrogramPlayer-tick:nth-child(4n+1){background-color:rgba(0,0,0,0)}.SpectrogramPlayer--withMeta .MediaControls-meta .MediaControls-title{margin:0 0 .25rem 0}.SpectrogramPlayer--withMeta .MediaControls-meta .MediaControls-title:empty{display:none}@supports(grid-area: x){.SpectrogramPlayer--withMeta .MediaControls-controls{padding:.25rem .5rem .25rem .5rem;display:grid;grid-template-areas:"play volume meta" "time blank meta";grid-gap:.5rem;grid-template-columns:auto auto 1fr;grid-template-rows:auto 1fr}.SpectrogramPlayer--withMeta .MediaControls-playButton{grid-area:play}.SpectrogramPlayer--withMeta .MediaControls-time{grid-area:time;align-self:start;padding:.25rem .5rem .25rem .5rem}.SpectrogramPlayer--withMeta .MediaControls-volume{grid-area:volume}.SpectrogramPlayer--withMeta .MediaControls-meta{grid-area:meta;padding:.5rem .5rem .5rem .5rem}}',""]),t.exports=o}}]);
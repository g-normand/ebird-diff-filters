(function(e){var a=false;var g=0;var c=false;var d=function(){if(c){return}c=true;var h=function(j){var i=a;if(j.keyCode===16){a=(j.type==="keydown")}else{a=Boolean(j.shiftKey)}};e("html").bind("keydown",h).bind("keyup",h)};var f=function(k,m){var j=e(m);var n=k.$elements;var h=j.data("_sc_idx");if(k.cache&&h!==undefined&&j.data("_sc_cache_version")===g){return h}var o=k.$elements.length;for(var l=0;l<o;l++){e(n[l]).data("_sc_idx",l).data("_sc_cache_version",g);if(n[l]===m){return l}}return -1};var b=function(i){var u=i.data;var o;if(!u.cache){o=u.$elements=e(u.$elements.selector)}else{if(g!==u.cacheVersion){o=u.$elements=e(u.$elements.selector);u.cacheVersion=g;delete u.startElement;delete u.lastElement}}o=u.$elements;var t=u.startElement;var m=u.lastElement;if(u.inChange){return true}u.lastElement=this;if(!a){u.startElement=this;return true}u.inChange=true;var h=f(u,t),s=f(u,this),r=f(u,m);if(r===s){u.inChange=false;return true}var q=h+1,l=s;if(s<h){q=s;l=h}for(var k=q;k<=l;k++){if(o[k]!==this){u.click.call(o[k],u.status.call(t));e(o[k]).trigger("change")}}if(r===h){u.inChange=false;return true}var n;if(s>=h&&r>s){q=s;l=r;n=true}else{if(s<=h&&r<s){q=r;l=s;n=true}}if(n){for(var p=q;p<=l;p++){if(o[p]!==this){u.click.call(o[p],!u.status.call(t));e(o[p]).trigger("change")}}}u.inChange=false;return true};e.fn.shiftClick=function(i){if(i==="clearCache"){g++;return this}if(i===undefined){i={}}e.extend(i,{delegate:"body",cache:true,click:function(j){this.checked=j},status:function(){return this.checked}});var h={"$elements":this,inChange:false,cacheVersion:g,click:i.click,status:i.status,cache:i.cache};d();e(i.delegate).delegate(this.selector,"change",h,b);return this}})(jQuery);